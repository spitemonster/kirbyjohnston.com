---
import CloseIcon from "../icons/icon--close.svg?raw";
import MenuIcon from "../icons/icon--menu.svg?raw";
---
<button id="mobile-menu-toggle">
	<span class="open">
		<Fragment set:html={MenuIcon} />
	</span>
	<span class="close">
		<Fragment set:html={CloseIcon} />
	</span>
	<span class="visually-hidden">Toggle mobile menu</span>
</button>

<script>
	document.querySelector('#mobile-menu-toggle')?.addEventListener('click', () => {
        document.documentElement.classList.toggle('mobile-nav-open')
    })
</script>

<style is:global>
	#mobile-menu-toggle {
		display: none;
	}

	@media (max-width: 60rem) {
		#mobile-menu-toggle {
			position: fixed;
			top: calc(var(--container-min-padding) - 1.5rem);
			right: var(--container-min-padding);
			z-index: 999999;

			display: block;
			height: auto;
			width: 3rem;
			aspect-ratio: 1/1;
			padding: 0;

			background: none;
			border: none;
			cursor: pointer;

			.open,
			.close {
				position: relative;
				display: block;
				width: 100%;
				aspect-ratio: 1/1;
			}

			.close {
				width: 2.25rem;
				margin: 0 auto;
			}

			svg {
				position: absolute;
				top: 0;
				left: 0;
				height: 100%;
				width: 100%;
			}
		}

		html:not(.mobile-nav-open) {
			#mobile-menu-toggle {
				.close {
					display: none;
				}

				.open {
					display: block;
				}
			}
		}
		
		.mobile-nav-open {
			overflow: hidden;
			height: 100dvh;

			nav {
				left: 0;

				li {
					opacity: 1;
					transform: translateX(0);
				}
			}

			#mobile-menu-toggle {
				.close {
					display: block;
				}

				.open {
					display: none;
				}
			}
		}
	}
</style>